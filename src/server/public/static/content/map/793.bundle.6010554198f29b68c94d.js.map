{"version":3,"file":"793.bundle.6010554198f29b68c94d.js","mappings":"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","sources":["webpack:///../node_modules/subapp-web/dist/dev/make-subapp-spec.js","webpack:///../node_modules/subapp-web/dist/dev/xarc.js","webpack:///../node_modules/subapp-web/dist/dev/index.js"],"sourcesContent":["export default function (info) {\n  if (!info.name) {\n    throw new Error(\"subapp info missing name\");\n  }\n\n  if (!info.Component) {\n    throw new Error(\"subapp info missing Component\");\n  }\n\n  return info;\n}\n//# sourceMappingURL=make-subapp-spec.js.map","export default window.xarcV1;\n//# sourceMappingURL=xarc.js.map","import { createBrowserHistory } from \"history\";\nimport makeSubAppSpec from \"./make-subapp-spec\";\nimport xarc from \"./xarc\";\nexport { default as makeSubAppSpec } from \"./make-subapp-spec\";\nexport { default as xarc } from \"./xarc\";\nvar FrameworkLib;\nexport function setupFramework(frameworkLib) {\n  FrameworkLib = frameworkLib;\n}\nexport function loadSubApp(info, renderStart, options) {\n  setTimeout(function () {\n    return xarc.watchSubAppOnLoad();\n  }, 0);\n  info = makeSubAppSpec(info);\n  var name = info.name;\n  var ns = info.ns;\n  var subApp = xarc.getSubApp(name) || {\n    info: info\n  }; // mark the subapp's webpack bundle as loaded\n\n  if (!xarc.getBundle(name, ns)) {\n    xarc.setBundle(name, 1, ns);\n  } // subapp already loaded, do nothing and return the info\n\n\n  if (subApp._started) {\n    // console.error(\"SubApp\", name, \"already loaded\");\n    return info;\n  }\n\n  subApp._started = [];\n  xarc.setSubApp(name, subApp);\n\n  subApp._renderStart = renderStart || function (options, element) {\n    var lib = new FrameworkLib({\n      subApp: subApp,\n      element: element,\n      options: options\n    });\n    return lib.renderStart();\n  };\n\n  subApp.getInstance = function (options) {\n    var element;\n    var id = options.id || options.elementId;\n\n    if (!id) {\n      id = options._genId;\n    } else {\n      element = document.getElementById(id);\n    }\n\n    var instance = subApp._started.find(function (x) {\n      return x.id === id;\n    });\n\n    if (!instance) {\n      instance = Object.assign({}, options, {\n        id: id,\n        element: element\n      });\n\n      subApp._started.push(instance);\n    } else if (instance.element !== element) {\n      // document has changed\n      instance.element = element;\n    }\n\n    if (element) {\n      console.debug(\"rendering subapp\", name, \"into\", element);\n    }\n\n    return instance;\n  };\n\n  subApp.preStart = function (instance, options, info) {\n    instance = instance || subApp.getInstance(options);\n    info = info || subApp.info;\n\n    if (!instance._prepared) {\n      if (info.prepare) {\n        instance._prepared = info.prepare(instance, options, info);\n      } else {\n        instance._prepared = options.initialState || {};\n      }\n    }\n\n    return instance;\n  };\n\n  subApp.preRender = info.__preRender;\n  subApp.signalReady = info.__signalReady;\n\n  subApp.start = function (instance, options, info) {\n    instance = instance || subApp.preStart(instance, options, info);\n    info = info || subApp.info; // if user provided a start function, then user is expected to\n    // have reference to info\n\n    var callStart = function callStart() {\n      if (info.start) {\n        return info.start(instance, instance.element);\n      }\n\n      return subApp._renderStart(instance, instance.element);\n    };\n\n    if (instance._prepared && instance._prepared.then) {\n      return instance._prepared.then(function (r) {\n        instance._prepared = r;\n        return callStart();\n      });\n    } else {\n      return callStart();\n    }\n  };\n\n  var findInstanceInGroup = function findInstanceInGroup(groupInfo, group, name) {\n    return groupInfo.queue.find(function (x) {\n      if (x.options.name === name && x.options.group === group && x.options.inline) {\n        return x.instance;\n      }\n\n      return undefined;\n    });\n  };\n\n  var findFirstGroup = function findFirstGroup(_ref) {\n    var name = _ref.name;\n\n    for (var k in xarc.rt.groups) {\n      var groupInfo = xarc.rt.groups[k];\n      return findInstanceInGroup(groupInfo, groupInfo.group, name);\n    }\n  };\n\n  subApp.inline = function (_ref2) {\n    var group = _ref2.group,\n        props = _ref2.props;\n\n    var fail = function fail(msg) {\n      console.error(msg);\n      return \"<!--\\n****** \".concat(msg, \"\\n-->\");\n    };\n\n    var found;\n\n    if (group) {\n      var groupInfo = xarc.rt.groups[group];\n\n      if (!groupInfo) {\n        return fail(\"subApp inline unable to find group \".concat(group));\n      }\n\n      found = findInstanceInGroup(groupInfo, group, subApp.info.name);\n\n      if (!found) {\n        return fail(\"subApp inline unable to find instance in group \".concat(group, \" for subapp \").concat(subApp.info.name));\n      }\n    } else {\n      found = findFirstGroup(props);\n\n      if (!found) {\n        return fail(\"subApp inline unable to find a group with instance for subApp \".concat(name));\n      }\n    }\n\n    return subApp.start(found.instance, Object.assign({}, found.options, {\n      props: props\n    }), found.info);\n  }; // xarc.addOnLoadStart(name, options);\n  // getOnLoadStart(name)\n  //   .forEach(options => setTimeout(() => subApp.start(options), 0));\n\n\n  return info;\n}\nexport function getSubAppComponent(_ref3) {//\n\n  var name = _ref3.name,\n      _ref3$timeout = _ref3.timeout,\n      timeout = _ref3$timeout === void 0 ? 15000 : _ref3$timeout,\n      onReady = _ref3.onReady,\n      onError = _ref3.onError,\n      fallback = _ref3.fallback;\n}\nexport function waitForSubApp(name) {\n  var timeout = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 15000;\n  return new Promise(function (resolve, reject) {\n    lazyLoadSubApp({\n      name: name,\n      onLoad: function onLoad() {\n        return resolve();\n      },\n      onError: function onError() {\n        return reject();\n      },\n      timeout: timeout\n    });\n  });\n}\nexport function isLoaded(name) {\n  return Boolean(xarc.getSubApp(name));\n}\nexport function lazyLoadSubApp(_ref4) {\n  var name = _ref4.name,\n      id = _ref4.id,\n      _ref4$timeout = _ref4.timeout,\n      timeout = _ref4$timeout === void 0 ? 15000 : _ref4$timeout,\n      onLoad = _ref4.onLoad,\n      onError = _ref4.onError,\n      fallback = _ref4.fallback,\n      ns = _ref4.ns;\n  // TODO: timeout and callback\n  var lname = name.toLowerCase();\n\n  var renderToDomId = function renderToDomId(instance, subApp) {\n    if (!id) {\n      return onLoad && onLoad();\n    } else {\n      var element = document.getElementById(id);\n\n      if (element && subApp.start) {\n        return subApp.start(instance, {\n          id: id\n        });\n      }\n    }\n  };\n\n  var renderInline = function renderInline() {\n    var subApp = xarc.getSubApp(name);\n\n    if (subApp) {\n      return subApp.start(null, {});\n    }\n\n    return false;\n  };\n\n  if (xarc.getBundle(name, ns) === undefined) {\n    xarc.loadSubAppBundles(lname, null, ns);\n  } else if (!id && !onLoad) {\n    var inlined = renderInline();\n\n    if (inlined) {\n      return inlined;\n    }\n  }\n\n  var startTime = Date.now();\n\n  var load = function load(delay) {\n    setTimeout(function () {\n      var subApp = xarc.getSubApp(name);\n\n      if (subApp) {\n        return xarc.startSubApp(subApp, {\n          id: id\n        }, true).then(function () {\n          return renderToDomId(null, subApp);\n        });\n      }\n\n      if (timeout > 50 && Date.now() - startTime > timeout) {\n        var msg = \"lazyLoadSubApp Timeout: \" + name;\n        return onError ? onError(new Error(msg)) : console.error(msg);\n      }\n\n      return load(50);\n    }, delay);\n  };\n\n  load(0);\n  return fallback;\n}\nexport { lazyLoadSubApp as dynamicLoadSubApp };\nexport function getBrowserHistory() {\n  if (!xarc.rt.history) xarc.rt.history = createBrowserHistory();\n  return xarc.rt.history;\n}\nexport function hotReloadSubApp(info) {\n  info = info[\"default\"] || info; // check for es6 module\n\n  var subApp = xarc.getSubApp(info.name);\n  subApp.info = info;\n\n  subApp._started.forEach(function (instance) {\n    return setTimeout(function () {\n      return subApp.start(instance);\n    }, 0);\n  });\n}\n//# sourceMappingURL=index.js.map"],"names":["info","name","Error","Component","FrameworkLib","window","setupFramework","frameworkLib","loadSubApp","renderStart","options","setTimeout","xarc","watchSubAppOnLoad","ns","subApp","getSubApp","getBundle","setBundle","_started","setSubApp","_renderStart","element","getInstance","id","elementId","document","getElementById","_genId","instance","find","x","Object","assign","push","console","debug","preStart","_prepared","prepare","initialState","preRender","__preRender","signalReady","__signalReady","start","callStart","then","r","findInstanceInGroup","groupInfo","group","queue","inline","_ref2","found","props","fail","msg","error","concat","rt","groups","_ref","k","findFirstGroup","getSubAppComponent","_ref3","timeout","onReady","onError","fallback","waitForSubApp","arguments","length","undefined","Promise","resolve","reject","lazyLoadSubApp","onLoad","isLoaded","Boolean","_ref4","_ref4$timeout","lname","toLowerCase","loadSubAppBundles","inlined","startTime","Date","now","load","delay","startSubApp","renderToDomId","getBrowserHistory","history","createBrowserHistory","hotReloadSubApp","forEach"],"sourceRoot":""}